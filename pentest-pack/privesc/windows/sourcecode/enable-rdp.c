#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main () {

  printf("[*] Add regstry key to enable, if possible, RDP");
  printf("\n[*] and disable both network level authentication");
  printf("\n[*] and add firewall exception.");

  printf("\n\n[*] Editing Registry Key...");
  system("reg add \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\TerminalServer\" /V fDenyTSConnections /t REG_DWORD /D 0 /f");

  printf("\n[*] Disabling Network Level Authentication...");
  system("reg add \"HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\TerminalServer\\WinStations\\RDP-Tcp\" /v UserAuthentication /t REG_DWORD /d \"0\" /f");

  printf("\n[*] Adding the firewall exception...");
  system("netsh firewall set service type = remotedesktop mode = enable");

  printf("\n[*] Complete!");
  return 0;
}
